---
import Section from "./Section.astro";
import SkillCard from "./SkillCard.astro";
import { SKILLS } from "../config/skills";

const categories = ["Expertise", "Comfortable", "Familiar", "Soft Skills"];
---

<Section text="My Skills" href="skills">
  <div class="relative overflow-hidden pt-12 pb-32">
    <!-- ⚡ Electric Sparks -->
    <div class="pointer-events-none absolute inset-0 z-0">
      {
        Array.from({ length: 12 }).map((_, i) => (
          <div class="spark" style={`--i:${i}`} />
        ))
      }
    </div>

    <!-- Skills Cards -->
    <div class="relative z-10">
      {
        categories.map((category) => (
          <div class="mb-16">
            <h2 class="mb-6 text-xl font-bold text-primary">{category}</h2>
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
              {SKILLS.filter((s) => s.category === category).map((skill) => (
                <SkillCard skill={skill} />
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </div>
</Section>

<style>
  /* ⚡ Sparks animation */
  .spark {
    position: absolute;
    bottom: -20px;
    left: calc(var(--i) * 8%);
    width: 4px;
    height: 40px;
    background: linear-gradient(180deg, #ffc66aff, #ff3c00ff);
    opacity: 0.5;
    border-radius: 50%;
    animation: spark-rise calc(1.5s + var(--i) * 0.2s) ease-in-out infinite;
    filter: blur(2px);
  }

  /* Random horizontal drift */
  .spark::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    background: inherit;
    animation: drift calc(2s + var(--i) * 0.3s) infinite alternate;
  }

  @keyframes spark-rise {
    0% {
      transform: translateY(0) scaleX(0.7);
      opacity: 0.6;
    }
    50% {
      transform: translateY(-60px) scaleX(1.2);
      opacity: 1;
    }
    100% {
      transform: translateY(-120px) scaleX(0.9);
      opacity: 0.2;
    }
  }

  @keyframes drift {
    0% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(10px);
    }
    100% {
      transform: translateX(-10px);
    }
  }

  /* SkillCard progress bar pulse */
  .skill-progress > div {
    animation: pulse-bar 2s ease-in-out infinite;
    transition: width 1s ease-in-out;
  }

  @keyframes pulse-bar {
    0%,
    100% {
      box-shadow: 0 0 8px #e08641ff;
    }
    50% {
      box-shadow: 0 0 16px #ff9500ff;
    }
  }
</style>
